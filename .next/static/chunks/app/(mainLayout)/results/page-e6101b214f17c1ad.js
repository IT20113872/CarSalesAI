(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[944],{8338:(e,a,r)=>{Promise.resolve().then(r.bind(r,9515))},9515:(e,a,r)=>{"use strict";r.d(a,{default:()=>m});var t=r(3365),l=r(1521),s=r(8760);let d=["All","ACT","NSW","NT","QLD","SA","TAS","VIC","WA"],i=["Toyota","Honda","Ford","BMW","Mercedes","Tesla"],o=["Corolla","Camry","Civic","Accord","Mustang","Model 3"],n=["Sydney","Melbourne","Brisbane","Perth","Adelaide"],c=["SUV","Sedan","Hatchback","Coupe","Convertible"];function x(e){let{initialFilters:a,onFilter:r}=e,[x,u]=(0,l.useState)((null==a?void 0:a.state)||"All"),[g,b]=(0,l.useState)((null==a?void 0:a.make)||""),[m,y]=(0,l.useState)((null==a?void 0:a.model)||""),[p,h]=(0,l.useState)((null==a?void 0:a.minPrice)||""),[f,v]=(0,l.useState)((null==a?void 0:a.maxPrice)||""),[k,j]=(0,l.useState)((null==a?void 0:a.city)||""),[N,w]=(0,l.useState)((null==a?void 0:a.bodyType)||"");return(0,l.useEffect)(()=>{u((null==a?void 0:a.state)||"All"),b((null==a?void 0:a.make)||""),y((null==a?void 0:a.model)||""),h((null==a?void 0:a.minPrice)||""),v((null==a?void 0:a.maxPrice)||""),j((null==a?void 0:a.city)||""),w((null==a?void 0:a.bodyType)||"")},[a]),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r({state:x,make:g,model:m,minPrice:p,maxPrice:f,city:k,bodyType:N})},className:"flex flex-wrap items-end gap-4 bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-lg justify-start overflow-x-auto mb-6",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"State"}),(0,t.jsx)("select",{value:x,onChange:e=>u(e.target.value),className:"w-28 px-3 py-2 rounded-xl border border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:outline-none transition",children:d.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"Make"}),(0,t.jsx)("input",{list:"makes",value:g,onChange:e=>b(e.target.value),placeholder:"Any Make",className:"w-32 px-3 py-2 rounded-xl border border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:outline-none transition"}),(0,t.jsx)("datalist",{id:"makes",children:i.map(e=>(0,t.jsx)("option",{value:e},e))})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"Model"}),(0,t.jsx)("input",{list:"models",value:m,onChange:e=>y(e.target.value),placeholder:"Any Model",className:"w-32 px-3 py-2 rounded-xl border border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:outline-none transition"}),(0,t.jsx)("datalist",{id:"models",children:o.map(e=>(0,t.jsx)("option",{value:e},e))})]}),(0,t.jsxs)("div",{className:"flex flex-col relative",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"Min Price"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(s.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),(0,t.jsx)("input",{type:"number",value:p,onChange:e=>h(e.target.value),placeholder:"0",className:"w-24 pl-8 pr-3 py-2 rounded-xl border border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:outline-none transition"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col relative",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"Max Price"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(s.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),(0,t.jsx)("input",{type:"number",value:f,onChange:e=>v(e.target.value),placeholder:"Any",className:"w-24 pl-8 pr-3 py-2 rounded-xl border border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:outline-none transition"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col relative",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"City"}),(0,t.jsx)("input",{list:"cities",value:k,onChange:e=>j(e.target.value),placeholder:"Any City",className:"w-32 pl-3 pr-3 py-2 rounded-xl border border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:outline-none transition"}),(0,t.jsx)("datalist",{id:"cities",children:n.map(e=>(0,t.jsx)("option",{value:e},e))})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"Body Type"}),(0,t.jsx)("input",{list:"bodyTypes",value:N,onChange:e=>w(e.target.value),placeholder:"Any",className:"w-28 px-3 py-2 rounded-xl border border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:outline-none transition"}),(0,t.jsx)("datalist",{id:"bodyTypes",children:c.map(e=>(0,t.jsx)("option",{value:e},e))})]}),(0,t.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,t.jsx)("button",{type:"submit",className:"h-10 px-5 bg-transparent text-blue-500 font-semibold rounded-xl border-2 border-blue-500 hover:bg-blue-500 hover:text-white transition",children:"Filter"}),(0,t.jsx)("button",{type:"button",onClick:()=>{u("All"),b(""),y(""),h(""),v(""),j(""),w(""),r({})},className:"h-10 px-4 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 font-semibold rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition",children:"Clear"})]})]})}var u=r(7020),g=r(4086),b=r(627);function m(){let e=(0,b.useSearchParams)(),a=(0,l.useRef)(!1),r={make:e.get("make")||"",model:e.get("model")||"",minPrice:e.get("minPrice")||"",maxPrice:e.get("maxPrice")||"",city:e.get("city")||"",bodyType:e.get("bodyType")||""},[s,d]=(0,l.useState)(r),[i,o]=(0,l.useState)([]),[n,c]=(0,l.useState)(null),[m,y]=(0,l.useState)(!1),[p,h]=(0,l.useState)(!0),f=async e=>{if(a.current)return;a.current=!0,y(!0);let r=new URLSearchParams({...Object.fromEntries(Object.entries(s).filter(e=>{let[a,r]=e;return r})),limit:"12"});e&&r.append("cursor",e.toString());try{var t;let a=await fetch("/api/cars?".concat(r.toString())),l=await a.json(),s=Array.isArray(l.cars)?l.cars:[];o(a=>e?[...a,...s]:s),c(null!=(t=l.nextCursor)?t:null)}catch(e){console.error("Failed to fetch cars",e),o([]),c(null)}finally{y(!1),h(!1),a.current=!1}};return(0,l.useEffect)(()=>{f()},[]),(0,l.useEffect)(()=>{f()},[s]),(0,l.useEffect)(()=>{d({make:e.get("make")||"",model:e.get("model")||"",minPrice:e.get("minPrice")||"",maxPrice:e.get("maxPrice")||"",city:e.get("city")||"",bodyType:e.get("bodyType")||""})},[e]),(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4 lg:p-8",children:[(0,t.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,t.jsx)("div",{className:"inline-flex gap-4",children:(0,t.jsx)(x,{onFilter:e=>{d(e)},initialFilters:s})})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[p&&Array.from({length:12}).map((e,a)=>(0,t.jsx)("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 rounded-2xl h-64 w-full"},a)),(0,t.jsx)(u.N,{children:(i||[]).map(e=>{var a,r;return(0,t.jsxs)(g.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},layout:!0,className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-md hover:shadow-xl transition transform hover:-translate-y-1 p-6 flex flex-col gap-3 min-h-[350px]",children:[(0,t.jsx)("h2",{className:"font-bold text-lg text-gray-900 dark:text-gray-100",children:e.title}),(0,t.jsxs)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:[e.year," • ",e.make," • ",e.model]}),(0,t.jsxs)("p",{className:"text-red-600 dark:text-red-400 font-semibold text-lg",children:["$",null==(a=e.price)?void 0:a.toLocaleString()]}),(0,t.jsxs)("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:[e.display_city,", ",e.display_state," | ",null==(r=e.odometer)?void 0:r.toLocaleString()," km"]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.transmission&&(0,t.jsx)("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-full text-xs",children:e.transmission}),e.fuel_type&&(0,t.jsx)("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-full text-xs",children:e.fuel_type}),e.status&&(0,t.jsx)("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-full text-xs",children:e.status})]}),(0,t.jsx)("a",{href:e.full_path,target:"_blank",rel:"noopener noreferrer",className:"mt-auto text-center px-5 py-2 border-2 border-blue-600 dark:border-blue-500 text-blue-600 dark:text-blue-300 rounded-xl font-semibold hover:bg-blue-50 dark:hover:bg-blue-900 transition-all duration-300",children:"See Details"})]},e.id)})}),!p&&0===(i||[]).length&&(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300 text-center col-span-full",children:"No cars found."})]}),n&&!m&&(0,t.jsx)("div",{className:"flex justify-center mt-8",children:(0,t.jsx)("button",{className:"px-6 py-2 border-2 border-blue-600 dark:border-blue-500 text-blue-600 dark:text-blue-300 rounded-xl font-semibold hover:bg-blue-50 dark:hover:bg-blue-900 hover:shadow-lg transition-all duration-300",onClick:()=>f(n),children:"Load More"})}),m&&!p&&(0,t.jsx)("div",{className:"flex justify-center mt-8 text-gray-700 dark:text-gray-300",children:"Loading..."})]})}}},e=>{e.O(0,[18,347,508,358],()=>e(e.s=8338)),_N_E=e.O()}]);